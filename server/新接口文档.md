API接口

请求方法全部为 POST

前端请求参数用 `data` 传入

内容格式：const contentType = 'application/x-www-form-urlencoded'

```js
  headers: {
    "Content-Type": contentType,
    "Authorization": token,
  },
```

文件请求头用""

手机号没有校验



# 用户相关

## 登录

- 接口地址

  `/api/login`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明 | 是否必填 |
  | -------- | :------- | :------- |
  | email    | 邮箱     | 是       |
  | password | 密码     | 是       |



## 注册

- 接口地址

  `/api/register`

- 请求方法

  `POST`

- 请求参数

  | 请求参数   | 参数说明     | 是否必填 |
  | ---------- | ------------ | :------- |
  | email      | 邮箱         | 是       |
  | password   | 密码         | 是       |
  | repassword | 二次输入密码 | 是       |
  | captcha    | 验证码       | 是       |



##  获取用户信息

- 接口地址

  `/api/userInfo`

- 请求方法

  `POST `

- 请求参数

  | 请求参数 | 参数说明                         | 是否必填 |
  | -------- | -------------------------------- | :------- |
  | userId   | 用户ID，没填获取已登录的用户信息 | 否       |



## 修改用户信息

- 接口地址

  `/api/updateUserInfo`

- 请求方法

  `POST`

- 请求参数

  | 请求参数     | 参数说明 | 是否必填 |
  | ------------ | -------- | :------- |
  | userId       | 用户ID   | 是       |
  | user_name    | 用户名   | 是       |
  | introduction | 简介     | 否       |
  | phone        | 手机号   | 是       |
  | avatar       | 头像     | 是       |



## 修改密码

- 接口地址
  `api/updatePassword`

- 请求方式

  `POST`

- 请求参数

  | 参数名      | 参数说明 | 是否必填 |
  | ----------- | -------- | -------- |
  | oldPassword | 旧密码   | 是       |
  | newPassword | 新密码   | 是       |



## 修改手机号

- 接口地址
  `api/updatePhone`

- 请求方式

  `POST`

- 请求参数

  | 参数名 | 参数说明 | 是否必填 |
  | ------ | -------- | -------- |
  | phone  | 手机号   | 是       |



## 上传图片

- 接口地址

  `/api/imgUpload`

- 请求参数

  | 请求参数 | 参数说明 | 是否必填 |
  | -------- | -------- | :------- |
  | img      | 用户ID   | 是       |

img 为文件信息   可以用ForData的append方法



# 博客

## 获取博客列表

- 接口地址

  `/api/blog/get`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明                                     | 是否必填 |
  | -------- | -------------------------------------------- | :------- |
  | pageNo   | 页码                                         | 否       |
  | pageSize | 每页大小                                     | 否       |
  | order    | 获取数据类型 new表示最新 hot表示热门 默认new | 是       |

  

## 获取博客详情

- 接口地址

  `/api/blog/getDetail`

- 请求方法

  `POST`

- 请求参数

   请求参数 | 参数说明 | 是否必填 
 -------- | -------- | :------- 
   id   | 博客ID   | 是       





## 添加博客

- 接口地址

  `/api/blog/add`

- 请求方法

  `POST`

- 请求参数

  | 请求参数        | 参数说明                        | 是否必填           |
  | --------------- | ------------------------------- | :----------------- |
  | title           | 标题                            | 是                 |
  | content         | 内容                            | 是                 |
  | cover           | 封面                            | 否                 |
  | allowComment    | 1允许评论 0不允许评论 (默认为1) | 否                 |
  | editorType      | 编辑器类型 0:富文本 1:markdown  | 是                 |
  | markdownContent | markdown内容                    | markdwon编辑器必填 |
  | type            | 类型 0:原创  1:转载             | 是                 |
  | reprintUrl      | 转载地址                        | 转载必填           |
  | summary         | 博客摘要                        | 是                 |
  
  | 请求参数   | 参数说明 | 是否必填 |
  | ---------- | -------- | -------- |
  | tags       | 子标签   | 是       |
  | fatherTags | 父标签   | 是       |



## 修改博客

- 接口地址

  `/api/blog/add`

- 请求方法

  `POST`

- 请求参数

  | 请求参数        | 参数说明                        | 是否必填           |
  | --------------- | ------------------------------- | :----------------- |
  | blogId          | 博客ID                          | 是                 |
  | title           | 标题                            | 是                 |
  | content         | 内容                            | 是                 |
  | cover           | 封面                            | 否                 |
  | allowComment    | 1允许评论 0不允许评论 (默认为1) | 否                 |
  | editorType      | 编辑器类型 0:富文本 1:markdown  | 是                 |
  | markdownContent | markdown内容                    | markdwon编辑器必填 |
  | type            | 类型 0:原创  1:转载             | 是                 |
  | reprintUrl      | 转载地址                        | 转载必填           |
  | summary         | 博客摘要                        | 是                 |

  | 请求参数   | 参数说明 | 是否必填 |
  | ---------- | -------- | -------- |
  | tags       | 子标签   | 是       |
  | fatherTags | 父标签   | 是       |





## ！自动保存

- 接口地址

  `api/blog/autoSaveBlog`

- 请求方法

  `POST`

- 请求参数

  | 说明            | 参数说明                             | 是否必填           |
  | --------------- | ------------------------------------ | ------------------ |
  | editorType      | 编辑器类型 0:富文本 1:markdown编辑器 | 否                 |
  | title           | 标题                                 | 否                 |
  | content         | html内容                             | 否                 |
  | markdownContent | markdown内容，markdown编辑器有       | markdown编辑器必传 |



## 删除博客到回收站

- 接口地址

  `/api/blog/del`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明 | 是否必填 |
  | -------- | -------- | :------- |
  | id       | 博客ID   | 是       |



## 获取评论列表

- 接口地址

  `/api/blog/getComment`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明 | 是否必填 |
  | -------- | -------- | :------- |
  | blogId   | 博客ID   | 是       |





## 添加博客评论

- 接口地址

  `/api/blog/addComment`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明 | 是否必填 |
  | -------- | -------- | :------- |
  | blogId   | 博客ID   | 是       |
  | content  | 内容     | 是       |




## 删除博客评论

- 接口地址

  `/api/blog/delCommment`

- 请求方法

  `POST`

- 请求参数

  | 请求参数  | 参数说明 | 是否必填 |
  | --------- | -------- | :------- |
  | commentId | 评论ID   | 是       |
  | blogId    | 博客ID   | 是       |



## 获取我的博客

- 接口地址

  `/api/blog/getMy`

- 请求方法

  `POST`

- 请求参数

  无



## 获取点赞列表

- 接口地址

  `/api/blog/getLikeList`

- 请求方法

  `POST`


- 接口返回

  ```json
  {
      "code": 200,
      "data": [
          {
              "likeBlog": "[1,3,4,2,5,6]"
          }
      ]
  }
  ```

  



## 改变点赞数

- 接口地址

  `/api/blog/changeLikeNum`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明              | 是否必填 |
  | -------- | --------------------- | :------- |
  | count    | 1为点赞，-1为取消点赞 | 是       |
  | id       | 博客ID                | 是       |





## 获取喜欢博客

- 接口地址

  `/api/blog/myLikeBlog`

- 请求方法

  `GET`

- 请求参数

  无



## 获取评论博客

- 接口地址

  `/api/blog/myCommentBlog`

- 请求方法

  `POST`

- 请求参数

  无



## 增加博客浏览量

- 接口地址

  `/api/blog/addViews`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明 | 是否必填 |
  | -------- | -------- | -------- |
  | id       | 博客id   | 是       |



## 获取回收站中的博客

- 接口地址

  `/api/blog/getDeleteBlog`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明 | 是否必填 |
  | -------- | -------- | :------- |
  | pageNo   | 页码     | 否       |
  | pageSize | 每页大小 | 否       |



## 永久删除博客

- 接口地址

  `/api/blog/shredFileBlog`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明 | 是否必填 |
  | -------- | -------- | -------- |
  | blogId   | 博客id   | 是       |



## 还原在回收站的博客

- 接口地址

  `/api/blog/reductionBlog`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明 | 是否必填 |
  | -------- | -------- | -------- |
  | blogId   | 博客id   | 是       |





## 模糊查询博客

- 接口地址

  `/api/blog/search`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明 | 是否必填 |
  | -------- | -------- | :------- |
  | pageNo   | 页码     | 否       |
  | pageSize | 每页大小 | 否       |
  | content  | 查询内容 | 是       |





# 分类

## 获取分类列表

- 接口地址

  `api/category/categoryList`

- 请求方法

  `POST`

- 请求参数

  无

- 接口返回

  ```js
  [
      {
  		"cate_id": 1,
          "cate_name": "JS",
          "cate_desc": "分享一些关于 JS 的东西",
          "cover": null,
          "blog_count": 1
      },
      {
          "cate_id": 2,
          "cate_name": "JAVA",
          "cate_desc": "分享一些关于 JAVA 的东西",
          "cover": null,
          "blog_count": 1
      }
  ]
  ```



## 获取分类详情

- 接口地址

  `api/category/categoryDetail` 

- 请求方法

  `POST`

- 请求参数

  | 请求参数   | 参数说明 | 是否必填 |
  | ---------- | -------- | -------- |
  | categoryId | 分类id   | 是       |



## 获取分类的所有博客

- 接口地址

  `api/category/categoryBlog` 

- 请求方法

  `POST`

- 请求参数

  | 请求参数   | 参数说明 | 是否必填 |
  | ---------- | -------- | -------- |
  | categoryId | 分类     | 是       |

  



## ！添加分类

- 接口地址

  `/api/blog/saveBlog`

- 请求参数

  | 请求参数     | 参数说明                   | 是否必填 |
  | ------------ | -------------------------- | :------- |
  | blogId       | 博客ID，修改传入，新增不传 | 否       |
  | title        | 标题                       | 是       |
  | content      | 内容                       | 是       |
  | categoryId   | 分类ID                     | 是       |
  | cover        | 封面                       | 否       |
  | allowComment | 1允许 0不允许 (默认为1)    | 否       |



# 问答

## 获取问题列表

- 接口地址

  `/api/questions/questionList`

- 请求方法

  `GET`

- 请求参数

  无

- 接口返回

  ```js
  [
      {
          "question_id": 1,
          "content": "测试",
          "user_id": 1,
          "user_name": "小明",
          "avatar": "default.png",
          "release_time": "2022-12-21 14:36:44",
          "like_count": 0,
          "comment_count": 0
      },
      {
          "question_id": 2,
          "content": "测试修改数据接口",
          "user_id": 1,
          "user_name": "小明",
          "avatar": "default.png",
          "release_time": "2022-12-21 14:39:17",
          "like_count": 0,
          "comment_count": 0
      }
  ]
  ```





## 添加问题

- 接口地址

  `/api/questions/addQuestion`

- 请求方法

  `POST`

- 请求参数

  | 请求参数 | 参数说明 | 是否必填 |
  | -------- | -------- | :------- |
  | content  | 内容     | 是       |



## 删除问题

- 接口地址

  `/api/questions/deleteQuestion`

- 请求方法

  `PSOT`

- 请求参数

  | 请求参数   | 参数说明 | 是否必填 |
  | ---------- | -------- | -------- |
  | questionId | 问题ID   | 是       |




## 增加问题浏览量

- 接口地址

  `/api/questions/addViews`

- 请求方法

  `POST`

- 请求参数

  | 请求参数   | 参数说明 | 是否必填 |
  | ---------- | -------- | -------- |
  | questionId | 问题id   | 是       |





# 动态

## 获取动态列表

- 接口地址

  `/api/dynamic/dynamicList`

- 请求方法

  `GET`

- 请求参数

  无

- 接口返回

  ```js
  [
      {
          "dynamic_id": 1,
          "content": "测试添加动态",
          "user_id": 1,
          "user_name": "小明",
          "avatar": "default.png",
          "like_count": 0,
          "comment_count": 0,
          "create_time": "2022-12-21 14:50:25"
      },
      {
          "dynamic_id": 2,
          "content": "修改动态",
          "user_id": 1,
          "user_name": "小明",
          "avatar": "default.png",
          "like_count": 0,
          "comment_count": 0,
          "create_time": "2022-12-21 14:52:25"
      }
  ]
  ```





## 添加动态(修改动态)

- 接口地址

  `/api/dynamic/addDynamic`

- 请求方法

  `POST`

- 请求参数

  | 请求参数  | 参数说明                   | 是否必填 |
  | --------- | -------------------------- | :------- |
  | dynamicId | 动态ID，修改传入，新增不传 | 否       |
  | content   | 内容                       | 是       |



## 删除动态

- 接口地址

  `/api/questions/deleteDynamic`

- 请求方法

  `POST`

- 请求参数

  | 请求参数  | 参数说明 | 是否必填 |
  | --------- | -------- | -------- |
  | dynamicId | 动态ID   | 是       |



# 图片

## 获取图片

图片地址 `http://127.0.0.1:3030/images/imgUrl`  imgUrl为图片路径

- 请求地址

  `/images`	

- 请求方式

  `POST`

  



获取返回数据

```js
  RowDataPacket {
    blog_id: 7,
    cate_id: 1,
    cate_name: 'JS',
    title: '测试2',
    cover: null,
    content: '修改动态222',
    create_time: '2022-12-23 11:12:38',
    user_id: 1,
    user_name: '小明',
    last_update_time: '2022-12-23 11:12:38',
    allow_comment: 1,
    is_delete: 0,
    abstract: '1',
    comment_count: 0
  },
  RowDataPacket {
    blog_id: 8,
    cate_id: 1,
    cate_name: 'JS',
    title: '测试2',
    cover: null,
    content: '修改动态222',
    create_time: '2022-12-23 11:15:40',
    user_id: 1,
    user_name: '小明',
    last_update_time: '2022-12-23 11:15:40',
    allow_comment: 1,
    is_delete: 0,
    abstract: '1',
    comment_count: 0
  }
]
```

删除返回数据

```js
OkPacket {
  fieldCount: 0,
  affectedRows: 1,
  insertId: 0,
  serverStatus: 2,
  warningCount: 0,
  message: '',
  protocol41: true,
  changedRows: 0
}

```

添加返回数据

```js
OkPacket {
  fieldCount: 0,
  affectedRows: 1,
  insertId: 15,
  serverStatus: 2,
  warningCount: 0,
  message: '',
  protocol41: true,
  changedRows: 0
}
```

修改数据

```js
OkPacket {
  fieldCount: 0,
  affectedRows: 0,
  insertId: 0,
  serverStatus: 2,
  warningCount: 0,
  message: '(Rows matched: 0  Changed: 0  Warnings: 0',
  protocol41: true,
  changedRows: 0
}
OkPacket {
  fieldCount: 0,
  affectedRows: 1,
  insertId: 0,
  serverStatus: 2,
  warningCount: 0,
  message: '(Rows matched: 1  Changed: 1  Warnings: 0',
  protocol41: true,
  changedRows: 1
}
```

